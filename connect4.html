<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .container{
            height:500px;
            width:600px;
            box-sizing: border-box;
            border: 2px solid lightgray;
            display: flex;
            flex-wrap: wrap;
            gap:35px;
            background-color: rgb(115, 251, 251);
        }
        .btn{
            height:50px;
            width:50px;
            border-radius: 50%;
            border: none;
        }
    </style>
</head>
<body>
    <div class="container"></div>
    <p class="msg"></p>

    <script>
        let container = document.querySelector('.container');
        let para = document.querySelector('.msg');
        let color = 'RED';
        let board = [];
        let rows = 6;
        let cols = 7;
        let availableRow = [5,5,5,5,5,5,5];

        for(let i=0;i<rows;i++){
            let arr=[];
            for(let j=0;j<cols;j++){
            let btn = document.createElement('button');
            btn.classList.add('btn');
            btn.setAttribute('row',i);
            btn.setAttribute('col',j);
            arr.push(btn);
            container.appendChild(btn);
            btn.addEventListener('click', () => {
                    // Get the column index
                    let col = j;

                    // Find the row to be filled in this column
                    let row = availableRow[col];
                    
                    if (row >= 0) {
                        // Update the button color at the correct position
                        board[row][col].style.backgroundColor = color;

                        // Update the row tracker for this column
                        availableRow[col]--;
     if(checkwinner(color))
     {
        para.innerHTML=`player ${color} wins`;
     }
     
                        // Switch player color
                        color = (color === 'RED') ? 'YELLOW' : 'RED';
                    }
                });
            }
            board.push(arr);
        }
        console.log(board);
        
        function checkwinner(color) {
            // Check horizontally
            for(let r=0;r<rows;r++){
            for (let i = 0; i <= cols - 4; i++) {
                if (
                    board[r][i].style.backgroundColor === color &&
                    board[r][i + 1].style.backgroundColor === color &&
                    board[r][i + 2].style.backgroundColor === color &&
                    board[r][i + 3].style.backgroundColor === color
                ) {
                    return true;
                }
            }
        }

            // Check vertically
            for (let i = 0; i <= rows - 4; i++) {
                if (
                    board[i][c].style.backgroundColor === color &&
                    board[i + 1][c].style.backgroundColor === color &&
                    board[i + 2][c].style.backgroundColor === color &&
                    board[i + 3][c].style.backgroundColor === color
                ) {
                    return true;
                }
            }

            // Check diagonal (bottom-left to top-right)
            for (let i = 0; i <= rows - 4; i++) {
                for (let j = 0; j <= cols - 4; j++) {
                    if (
                        board[i][j].style.backgroundColor === color &&
                        board[i + 1][j + 1].style.backgroundColor === color &&
                        board[i + 2][j + 2].style.backgroundColor === color &&
                        board[i + 3][j + 3].style.backgroundColor === color
                    ) {
                        return true;
                    }
                }
            }

            // Check diagonal (bottom-right to top-left)
            for (let i = 0; i <= rows - 4; i++) {
                for (let j = 3; j < cols; j++) {
                    if (
                        board[i][j].style.backgroundColor === color &&
                        board[i + 1][j - 1].style.backgroundColor === color &&
                        board[i + 2][j - 2].style.backgroundColor === color &&
                        board[i + 3][j - 3].style.backgroundColor === color
                    ) {
                        return true;
                    }
                }
            }

            return false;
        }

    </script>
</body>
</html>